{% extends 'base/footer.html' %}
{% load static %}

{% block title %}SICOMB - Rebaixar a Policial{% endblock title %}
{% block title_top %}REBAIXAR A POLICIAL{% endblock title_top %}
{% block css2 %}{% static 'css/carga.css' %}{% endblock%}

{% block content_final %}
<style>
    .footer-div{
        position: absolute;
    }
    .container {
        max-width: 100%;
    }
    .dashboard_loads{
        width: auto;
    }
    .button_reduce {
        width: 100%;
        padding: 5px;
        border-radius: 10px;
        background-color: rgb(130, 241, 130);
    }
    .button_reduce:hover {
        background-color: rgb(90, 206, 90);
    }
</style>
<section style="padding: 0px 20px">
    <div class="cargo_itens dashboard_loads shadow"> 
         <table class="table_itens">
            <thead>
                <tr>
                    <th colspan="100%" class="cargo_title"><h3 >CARGAS </h3></th>
                </tr>
                <tr class="col-itens">
                    <th>NOME</th>
                    <th>MATRÍCULA</th>
                    <th>GRADUAÇÃO</th>
                    <th>LOTAÇÃO</th>
                    <th>TORNAR ADJUNTO</th>
                </tr>
            </thead>
            <tbody>
                <form action="." method="post">
                    {% csrf_token %}
                    {% for i in adjuncts %}
                        <tr>
                            <td>{{ i.username }}</td>
                            <td>{{ i.matricula }}</td>
                            <td>{{ i.posto }}</td>
                            <td>{{ i.lotacao }}</td>
                            <td class="click_redirect"><button class="button_reduce" type="submit" name="pk" value="{{ i.pk }}">REBAIXAR<button></td>
                        </tr>
                    {% endfor %}
                </form>
            </tbody>
        </table>
    </div>
</section>
{% if messages %}
<script>

   // Função para fechar o alerta
   function closeAlert(alert) {
      alert.remove();
   }

   // Função para exibir as mensagens de sucesso
   function showSuccessMessages() {
      {% for message in messages %}
      var messageText = "{{ message }}";
      // Crie um elemento de alerta para cada mensagem
      var alert = document.createElement('div');
      alert.className = 'alert alert-success';
      alert.textContent = messageText;
      // Crie um botão de fechamento (X)
      var closeButton = document.createElement('span');
      closeButton.className = 'alert-close';
      closeButton.textContent = 'X';
      closeButton.onclick = function () {
         closeAlert(alert);
      };
      alert.appendChild(closeButton);
      // Adicione o elemento ao corpo do documento
      document.body.appendChild(alert);
      // Defina um tempo limite para remover o elemento após 5 segundos
      setTimeout(function () {
         closeAlert(alert);
      }, 5000); // 5000 milissegundos = 5 segundos
      {% endfor %}
   }

   // Chame a função para exibir as mensagens de sucesso
   showSuccessMessages();
</script>
{% endif %}
{% endblock content_final %} 
