{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Download QR Code</title>
  <!-- Inclua a última versão do arquivo qrcode.min.js diretamente do CDN -->
  <script src="{% static 'js/qrcode.min.js' %}"></script>
</head>
<body>

<button onclick="generateQrTag()">Download QR Code</button>

<script>
function generateQrTag() {
  const randomString = generateRandomString(20);
  const qrData = "qrSICOMBtag=" + randomString;

  const qrCode = new QRCode(document.createElement("div"), {
    text: qrData,
    width: 128,
    height: 128
  });

  const qrElement = qrCode._el.firstChild;
  qrElement.style.border = "4px solid white";

  const qrDataURL = qrElement.toDataURL("image/png");

  const downloadLink = document.createElement("a");
  downloadLink.href = qrDataURL;
  downloadLink.download = "qrCode.png";

  downloadLink.click();
}
</script>

</body>
</html>
